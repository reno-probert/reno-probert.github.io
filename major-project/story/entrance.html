<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Dungeon Entrance</title>
    <link rel="stylesheet" href="../styles.css">
    <script>
     function getClass() {
        const params = new URLSearchParams(window.location.search);
        let cls = params.get("class");
        if (!cls) cls = localStorage.getItem("playerClass");
        return cls;
      }

      // Utility function: hide element if it exists and class doesn't match
      function hideIfNot(id, allowedClass) {
        const el = document.getElementById(id);
        if (el && getClass() !== allowedClass) {
          el.style.display = "none";
        }
      }

      // Class-specific option setup
      function setupChoices() {
        hideIfNot("druid-only", "druid");
        hideIfNot("barbarian-only", "barbarian");
        hideIfNot("bard-only", "bard");
        hideIfNot("rogue-only", "rogue");
      }
    </script>
</head>

<body>
  <div id="screen">

    <h1>Dungeon Entrance</h1>

    <div id="story">
      As you enter the doors of the dungeon you come to a long corridor lit by a few, flickering torches. The hallway turns sharply to the right but on the left you see a locked door covered in strange runes, what do you do?
    </div>

    <div id="choices">

      <!-- Normal choice available to all classes -->
      <button onclick="location.href='hallway.html?class=' + getClass()">Continue down the hallway, leaving the door behind</button>
      <button onclick="location.href='hallway.html?class=' + getClass()">Flee in terror</button>

      <!-- Class-exclusive buttons -->
      <button id="barbarian-only" onclick="location.href='inside-room.html?class=' + getClass()">Smash the door (Barbarian)</button>

      <button id="rogue-only" onclick="location.href='inside-room.html?class=' + getClass()">Pick the lock (Rogue)</button>

    </div>

  </div>
</body>
</html>